<div class="orden-trabajo">
  <div class="page-header">
    <h1>Gesti√≥n de √ìrdenes de Trabajo</h1>
    <button class="btn btn-primary" routerLink="/ordenes-trabajo/nueva">
      <span>‚ûï</span> Nueva Orden
    </button>
  </div>

  <!-- Filtros -->
  <div class="filters-section">
    <div class="filter-group">
      <label class="form-label">Estado:</label>
      <select class="form-control" [(ngModel)]="filtroEstado" (change)="aplicarFiltros()">
        <option value="">Todos los estados</option>
        <option value="diagnostico">Diagn√≥stico</option>
        <option value="reparacion">Reparaci√≥n</option>
        <option value="listo">Listo</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label class="form-label">Mec√°nico:</label>
      <select class="form-control" [(ngModel)]="filtroMecanico" (change)="aplicarFiltros()">
        <option value="">Todos los mec√°nicos</option>
        <option *ngFor="let mecanico of mecanicos" [value]="mecanico.idMecanico">
          {{ mecanico.nombre }}
        </option>
      </select>
    </div>
  </div>

  <!-- Lista de √≥rdenes -->
  <div class="ordenes-list">
    <div class="orden-card" *ngFor="let orden of ordenesFiltradas">
      <div class="orden-header">
        <div class="orden-id">
          <h3>Orden #{{ orden.idOT }}</h3>
          <span class="badge" [ngClass]="getEstadoClass(orden.estado)">
            {{ getEstadoText(orden.estado) }}
          </span>
        </div>
        <div class="orden-date">
          {{ orden.fechaCreacion | date:'mediumDate' }}
        </div>
      </div>
      
      <div class="orden-content">
        <div class="orden-info">
          <div class="info-item">
            <strong>Cliente:</strong> {{ getClienteName(orden.idVehiculo) }}
          </div>
          <div class="info-item">
            <strong>Veh√≠culo:</strong> {{ getVehiculoInfo(orden.idVehiculo) }}
          </div>
          <div class="info-item" *ngIf="orden.idMecanico">
            <strong>Mec√°nico:</strong> {{ getMecanicoName(orden.idMecanico) }}
          </div>
          <div class="info-item">
            <strong>Observaciones:</strong> {{ orden.observaciones }}
          </div>
        </div>
        
        <div class="orden-actions">
          <button class="btn btn-primary" routerLink="/ordenes-trabajo/{{ orden.idOT }}">
            Ver Detalles
          </button>
          <button class="btn btn-secondary" (click)="editarOrden(orden)">
            Editar
          </button>
          <button class="btn btn-success" *ngIf="orden.estado !== 'listo'" (click)="cambiarEstado(orden)">
            Cambiar Estado
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay √≥rdenes -->
  <div class="no-ordenes" *ngIf="ordenesFiltradas.length === 0">
    <div class="no-ordenes-icon">üîß</div>
    <h3>No hay √≥rdenes de trabajo</h3>
    <p>Crea tu primera orden de trabajo para comenzar</p>
    <button class="btn btn-primary" routerLink="/ordenes-trabajo/nueva">
      Crear Orden
    </button>
  </div>
</div>
