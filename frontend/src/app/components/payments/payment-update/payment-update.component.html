<div class="container">
  <h2>Actualizar Pago</h2>
  
  <div *ngIf="loading" class="loading">
    <p>Cargando pago...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button class="btn btn-secondary" (click)="loadPayment()">Reintentar</button>
  </div>

  <form *ngIf="!loading && !error" (ngSubmit)="onSubmit()" #paymentForm="ngForm">
    <div class="form-group">
      <label for="workOrderId">ID de la Orden de Trabajo:</label>
      <input 
        type="number" 
        id="workOrderId" 
        name="workOrderId" 
        [(ngModel)]="payment.workOrderId" 
        required 
        class="form-control"
      >
    </div>

    <div class="form-group">
      <label for="amount">Monto:</label>
      <input 
        type="number" 
        id="amount" 
        name="amount" 
        [(ngModel)]="payment.amount" 
        step="0.01"
        min="0"
        required 
        class="form-control"
      >
    </div>

    <div class="form-group">
      <label for="paymentMethod">Método de Pago:</label>
      <select 
        id="paymentMethod" 
        name="paymentMethod" 
        [(ngModel)]="payment.paymentMethod" 
        required 
        class="form-control"
      >
        <option value="">Seleccionar método</option>
        <option value="cash">Efectivo</option>
        <option value="credit_card">Tarjeta de Crédito</option>
        <option value="debit_card">Tarjeta de Débito</option>
        <option value="bank_transfer">Transferencia Bancaria</option>
        <option value="check">Cheque</option>
      </select>
    </div>

    <div class="form-group">
      <label for="paymentDate">Fecha de Pago:</label>
      <input 
        type="datetime-local" 
        id="paymentDate" 
        name="paymentDate" 
        [(ngModel)]="payment.paymentDate" 
        required 
        class="form-control"
      >
    </div>

    <div class="form-group">
      <label for="status">Estado:</label>
      <select 
        id="status" 
        name="status" 
        [(ngModel)]="payment.status" 
        required 
        class="form-control"
      >
        <option value="pending">Pendiente</option>
        <option value="completed">Completado</option>
        <option value="failed">Fallido</option>
        <option value="refunded">Reembolsado</option>
      </select>
    </div>

    <div class="form-group">
      <label for="transactionId">ID de Transacción:</label>
      <input 
        type="text" 
        id="transactionId" 
        name="transactionId" 
        [(ngModel)]="payment.transactionId" 
        class="form-control"
      >
    </div>

    <div class="form-group">
      <label for="notes">Notas:</label>
      <textarea 
        id="notes" 
        name="notes" 
        [(ngModel)]="payment.notes" 
        class="form-control" 
        rows="3"
      ></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="!paymentForm.form.valid || loading">
        {{ loading ? 'Actualizando...' : 'Actualizar Pago' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancel()">
        Cancelar
      </button>
    </div>
  </form>
</div>














