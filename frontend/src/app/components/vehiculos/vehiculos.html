<div class="vehiculos">
  <div class="page-header">
    <h1>GestiÃ³n de VehÃ­culos</h1>
    <button class="btn btn-primary" (click)="mostrarFormulario()">
      <span>ðŸš—</span> Nuevo VehÃ­culo
    </button>
  </div>

  <!-- Lista de vehÃ­culos -->
  <div class="vehiculos-grid">
    <div class="vehiculo-card" *ngFor="let vehiculo of vehiculos">
      <div class="vehiculo-header">
        <div class="vehiculo-icon">
          <span>ðŸš™</span>
        </div>
        <div class="vehiculo-info">
          <h3>{{ vehiculo.marca }} {{ vehiculo.modelo }}</h3>
          <p class="vehiculo-placa">{{ vehiculo.placa }}</p>
        </div>
      </div>
      
      <div class="vehiculo-details">
        <div class="detail-item">
          <span class="detail-icon">ðŸ“…</span>
          <span>AÃ±o: {{ vehiculo.anio }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">ðŸŽ¨</span>
          <span>Color: {{ vehiculo.color }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">ðŸ‘¤</span>
          <span>Cliente: {{ getClienteName(vehiculo.idCliente) }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">ðŸ”§</span>
          <span>{{ getOrdenesCount(vehiculo.idVehiculo) }} Ã³rdenes de trabajo</span>
        </div>
      </div>
      
      <div class="vehiculo-actions">
        <button class="btn btn-secondary" (click)="editarVehiculo(vehiculo)">
          Editar
        </button>
        <button class="btn btn-primary" (click)="verDetalles(vehiculo)">
          Ver Detalles
        </button>
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay vehÃ­culos -->
  <div class="no-vehiculos" *ngIf="vehiculos.length === 0">
    <div class="no-vehiculos-icon">ðŸš—</div>
    <h3>No hay vehÃ­culos registrados</h3>
    <p>Comienza registrando el primer vehÃ­culo</p>
    <button class="btn btn-primary" (click)="mostrarFormulario()">
      Registrar VehÃ­culo
    </button>
  </div>

  <!-- Modal de formulario -->
  <div class="modal" *ngIf="mostrarModal" (click)="cerrarModal($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ vehiculoEditando ? 'Editar' : 'Nuevo' }} VehÃ­culo</h2>
        <button class="modal-close" (click)="cerrarModal($event)">Ã—</button>
      </div>
      
      <form class="vehiculo-form" (ngSubmit)="guardarVehiculo()">
        <div class="form-group">
          <label class="form-label">Placa</label>
          <input type="text" class="form-control" [(ngModel)]="vehiculoForm.placa" name="placa" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Marca</label>
          <input type="text" class="form-control" [(ngModel)]="vehiculoForm.marca" name="marca" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Modelo</label>
          <input type="text" class="form-control" [(ngModel)]="vehiculoForm.modelo" name="modelo" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">AÃ±o</label>
          <input type="number" class="form-control" [(ngModel)]="vehiculoForm.anio" name="anio" required min="1900" max="2030">
        </div>
        
        <div class="form-group">
          <label class="form-label">Color</label>
          <input type="text" class="form-control" [(ngModel)]="vehiculoForm.color" name="color" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Cliente</label>
          <select class="form-control" [(ngModel)]="vehiculoForm.idCliente" name="idCliente" required>
            <option value="">Seleccionar cliente</option>
            <option *ngFor="let cliente of clientes" [value]="cliente.idCliente">
              {{ cliente.nombre }}
            </option>
          </select>
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cerrarModal($event)">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary">
            {{ vehiculoEditando ? 'Actualizar' : 'Guardar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
