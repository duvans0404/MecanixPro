<div class="repuestos">
  <div class="page-header">
    <h1>Inventario de Repuestos</h1>
    <button class="btn btn-primary" (click)="mostrarFormulario()">
      <span>🔩</span> Nuevo Repuesto
    </button>
  </div>

  <!-- Lista de repuestos -->
  <div class="repuestos-grid">
    <div class="repuesto-card" *ngFor="let repuesto of repuestos">
      <div class="repuesto-header">
        <div class="repuesto-icon">
          <span>🔩</span>
        </div>
        <div class="repuesto-info">
          <h3>{{ repuesto.nombre }}</h3>
          <p class="repuesto-precio">${{ repuesto.precioUnitario | number:'1.0-0' }}</p>
        </div>
      </div>
      
      <div class="repuesto-details">
        <div class="detail-item">
          <span class="detail-icon">📝</span>
          <span>{{ repuesto.descripcion }}</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">📦</span>
          <span>Stock: {{ repuesto.stock }} unidades</span>
        </div>
        <div class="detail-item">
          <span class="detail-icon">💰</span>
          <span>Valor total: ${{ (repuesto.precioUnitario * repuesto.stock) | number:'1.0-0' }}</span>
        </div>
      </div>
      
      <div class="repuesto-actions">
        <button class="btn btn-secondary" (click)="editarRepuesto(repuesto)">
          Editar
        </button>
        <button class="btn btn-primary" (click)="verDetalles(repuesto)">
          Ver Detalles
        </button>
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay repuestos -->
  <div class="no-repuestos" *ngIf="repuestos.length === 0">
    <div class="no-repuestos-icon">🔩</div>
    <h3>No hay repuestos registrados</h3>
    <p>Comienza agregando el primer repuesto al inventario</p>
    <button class="btn btn-primary" (click)="mostrarFormulario()">
      Agregar Repuesto
    </button>
  </div>

  <!-- Modal de formulario -->
  <div class="modal" *ngIf="mostrarModal" (click)="cerrarModal($event)">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ repuestoEditando ? 'Editar' : 'Nuevo' }} Repuesto</h2>
        <button class="modal-close" (click)="cerrarModal($event)">×</button>
      </div>
      
      <form class="repuesto-form" (ngSubmit)="guardarRepuesto()">
        <div class="form-group">
          <label class="form-label">Nombre del repuesto</label>
          <input type="text" class="form-control" [(ngModel)]="repuestoForm.nombre" name="nombre" required>
        </div>
        
        <div class="form-group">
          <label class="form-label">Descripción</label>
          <textarea class="form-control" [(ngModel)]="repuestoForm.descripcion" name="descripcion" rows="3" required></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label">Precio unitario</label>
          <input type="number" class="form-control" [(ngModel)]="repuestoForm.precioUnitario" name="precioUnitario" required min="0">
        </div>
        
        <div class="form-group">
          <label class="form-label">Stock disponible</label>
          <input type="number" class="form-control" [(ngModel)]="repuestoForm.stock" name="stock" required min="0">
        </div>
        
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" (click)="cerrarModal($event)">
            Cancelar
          </button>
          <button type="submit" class="btn btn-primary">
            {{ repuestoEditando ? 'Actualizar' : 'Guardar' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
